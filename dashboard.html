<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Warranty Tracker Dashboard</title>
    <style>
        body {
            background-color: #1b1b1b;
            padding: 20px;
            font-family: Arial, sans-serif;
            color: white;
        }
        .dashboard {
            display: flex;
            justify-content: space-between;
            flex-wrap: wrap;
        }
        .container-left {
            flex: 1;
            padding: 20px;
            margin-right: 20px;
            background-color: #3b3b3b;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
            border-radius: 10px;
            max-width: 250px;
        }
        .container-right {
            flex: 3;
            background-color: #2e2e2e;
            padding: 20px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
            border-radius: 10px;
            display: flex;
            flex-wrap: wrap;
            gap: 20px;
        }
        h2 {
            text-align: center;
            margin-bottom: 20px;
        }
        table {
            width: 100%;
            margin-top: 20px;
        }
        img {
            width: 50px;
            height: auto;
        }
        .current-time {
            background-color: #707070;
            padding: 10px;
            border-radius: 10px;
            text-align: center;
            font-size: 18px;
            margin-bottom: 20px;
        }
        .item-list {
            max-height: 300px;
            overflow-y: auto;
            background-color: #707070;
            border-radius: 10px;
            padding: 10px;
            margin-bottom: 20px;
        }
        .item-list table {
            width: 100%;
            color: white;
        }
        .container-right {
            display: flex;
            flex-wrap: wrap;
        }
        .rounded-container {
    background-color: #4b4b4b;
    width: 120px;
    height: 120px; /* Adjust height to fit text */
    border-radius: 15px;
    display: flex;
    flex-direction: column; /* Stack button and text vertically */
    justify-content: center;
    align-items: center;
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
    padding: 10px; /* Add some padding */
}

.rounded-container button {
    padding: 10px 20px;
    border: none;
    background-color: #4b4b4b;
    border-radius: 5px;
    cursor: pointer;
}

.rounded-container span {
    color: white;
    margin-top: 15px; /* Space between button and text */
    font-size: 14px; /* Adjust text size */
    text-align: center; /* Center the text */
}
        /* Scrollbar Styling */
        .item-list {
            scrollbar-width: thin;
            scrollbar-color: #888 #444;
        }
        .item-list::-webkit-scrollbar {
            width: 8px;
        }
        .item-list::-webkit-scrollbar-thumb {
            background-color: #888;
            border-radius: 10px;
        }
        .item-list::-webkit-scrollbar-track {
            background-color: #444;
        }
    #button1 {
        height: 90px;
        width: 90px;
        background-image: url("check.png");
        background-size: contain; /* Absolute positioning inside the container */
        background-color: #4b4b4b;
        border-radius: 15px;
    }

    #button2 {
        height: 100px;
        width: 100px;
        background-image: url("x.png");
        background-size: contain;
        background-position: center;
        background-color: #4b4b4b;
        border-radius: 15px;
    }

    #button3 {
        height: 100px;
        width: 100px;
        background-image: url("notes.png");
        background-size: contain;
        background-position: center;
        background-color: #4b4b4b;
        border-radius: 15px;
    }

    #button4 {
        height: 100px;
        width: 100px;
        background-image: url("router.png");
        background-size: contain;
        background-position: center;
        background-color: #4b4b4b;
        border-radius: 15px;
        box-shadow: 5px 5px 13px rgba(0, 0, 0, 0.2);
    }
    </style>
    <!-- Adding DOMPurify via CDN -->
    <script src="https://cdn.jsdelivr.net/npm/dompurify@2.3.6/dist/purify.min.js"></script>
</head>
<body>

    <h1>Work in progress!!</h1>

<div class="dashboard">
    <!-- Left Container with Time and Item List -->
    <div class="container-left">
        <div class="current-time" id="currentTime">
            <!-- Current Time will be inserted here -->
        </div>

        <div class="item-list">
            <table class="table table-striped" id="warrantyTable">
                <thead>
                <tr>
                    <th>Item Type</th>
                    <th>Item Name</th>
                </tr>
                </thead>
                <tbody>
                <!-- Dynamic rows will be added here -->
                </tbody>
            </table>
        </div>
        
        <form id="itemForm">
            <div class="mb-3">
                <label for="itemType" class="form-label">Item Type</label>
                <select class="form-select" id="itemType" required>
                    <option value="Router">Router</option>
                    <option value="Cable">Cable</option>
                    <option value="Switch">Switch</option>
                </select>
            </div>
            <div class="mb-3">
                <label for="itemName" class="form-label">Item Name</label>
                <input type="text" class="form-control" id="itemName" required>
            </div>
            <div class="mb-3">
                <label for="itemId" class="form-label">Item ID</label>
                <input type="text" class="form-control" id="itemId" required>
            </div>
            <div class="mb-3">
                <label for="warrantyYears" class="form-label">Warranty Life (Years)</label>
                <input type="number" class="form-control" id="warrantyYears" required>
            </div>
            <div class="mb-3">
                <label for="warrantyDays" class="form-label">Warranty Life (Days)</label>
                <input type="number" class="form-control" id="warrantyDays" required>
            </div>
            <button type="submit" class="btn btn-primary">Add Item</button>
        </form>
    </div>

    <!-- Right Container with Rounded Containers -->
    <div class="container-right">
        <!-- Dynamically Generated Rounded Containers will appear here -->
        <div class="rounded-container">
            <button id="button1"></button>
            <span>active</span>
        </div>
        <div class="rounded-container">
            <button id="button2"></button>
            <span>expired</span>
        </div>
        <div class="rounded-container">
            <button id="button3"></button>
            <span>notes</span>
        </div>

    </div>
</div>

<script>
    document.addEventListener('DOMContentLoaded', () => {
        loadTableFromStorage();
        updateTime();
        setInterval(updateTime, 1000); // Update time every second
    });

    const form = document.getElementById('itemForm');
    const table = document.getElementById('warrantyTable').getElementsByTagName('tbody')[0];

    form.addEventListener('submit', function(event) {
        event.preventDefault();

        // Gather input values and sanitize them using DOMPurify
        const itemType = DOMPurify.sanitize(document.getElementById('itemType').value);
        const itemName = DOMPurify.sanitize(document.getElementById('itemName').value);
        const itemId = DOMPurify.sanitize(document.getElementById('itemId').value);
        const warrantyYears = parseInt(DOMPurify.sanitize(document.getElementById('warrantyYears').value));
        const warrantyDays = parseInt(DOMPurify.sanitize(document.getElementById('warrantyDays').value));

        // Calculate the expiration date
        const currentDate = new Date();
        const warrantyDuration = new Date();
        warrantyDuration.setFullYear(currentDate.getFullYear() + warrantyYears);
        warrantyDuration.setDate(warrantyDuration.getDate() + warrantyDays);
        const formattedDate = warrantyDuration.toISOString().split('T')[0]; // Format date to YYYY-MM-DD

        // Create item object
        const item = {
            itemType, itemName, itemId, expirationDate: formattedDate
        };

        // Add to local storage
        saveItemToStorage(item);

        // Add to table
        addItemToTable(item);

        // Reset the form
        form.reset();
    });

    function saveItemToStorage(item) {
        let items = JSON.parse(localStorage.getItem('warrantyItems')) || [];
        items.push(item);
        localStorage.setItem('warrantyItems', JSON.stringify(items));
    }

    function loadTableFromStorage() {
        let items = JSON.parse(localStorage.getItem('warrantyItems')) || [];
        items.forEach(item => addItemToTable(item));
    }

    function addItemToTable(item) {
        const newRow = table.insertRow();

        const cell1 = newRow.insertCell(0);
        const cell2 = newRow.insertCell(1);

        // Safely add text content to cells
        cell1.textContent = item.itemType;
        cell2.textContent = item.itemName;
    }

    function updateTime() {
        const currentTimeElem = document.getElementById('currentTime');
        const now = new Date();
        const timeString = now.toLocaleTimeString();
        const dateString = now.toLocaleDateString();
        currentTimeElem.textContent = `${dateString} ${timeString}`;
    }
</script>

</body>
</html>


